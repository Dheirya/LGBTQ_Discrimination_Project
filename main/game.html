<!DOCTYPE html>
<html>
   <head>
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      <script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script>
      <style>
         html, body {margin: 0; height: 100%; overflow: hidden}
         .btn-danger{color:#fff;background-color:#d9534f;border-color:#d43f3a}.btn-danger.focus,.btn-danger:focus{color:#fff;background-color:#c9302c;border-color:#761c19}.btn-danger:hover{color:#fff;background-color:#c9302c;border-color:#ac2925}.btn-danger.active,.btn-danger:active,.open>.dropdown-toggle.btn-danger{color:#fff;background-color:#c9302c;background-image:none;border-color:#ac2925}.btn-danger.active.focus,.btn-danger.active:focus,.btn-danger.active:hover,.btn-danger:active.focus,.btn-danger:active:focus,.btn-danger:active:hover,.open>.dropdown-toggle.btn-danger.focus,.open>.dropdown-toggle.btn-danger:focus,.open>.dropdown-toggle.btn-danger:hover{color:#fff;background-color:#ac2925;border-color:#761c19}.btn-danger.disabled.focus,.btn-danger.disabled:focus,.btn-danger.disabled:hover,.btn-danger[disabled].focus,.btn-danger[disabled]:focus,.btn-danger[disabled]:hover,fieldset[disabled] .btn-danger.focus,fieldset[disabled] .btn-danger:focus,fieldset[disabled] .btn-danger:hover{background-color:#d9534f;border-color:#d43f3a}.btn-danger .badge{color:#d9534f;background-color:#fff}
         .btn-success{color:#fff;background-color:#5cb85c;border-color:#4cae4c}.btn-success.focus,.btn-success:focus{color:#fff;background-color:#449d44;border-color:#255625}.btn-success:hover{color:#fff;background-color:#449d44;border-color:#398439}.btn-success.active,.btn-success:active,.open>.dropdown-toggle.btn-success{color:#fff;background-color:#449d44;background-image:none;border-color:#398439}.btn-success.active.focus,.btn-success.active:focus,.btn-success.active:hover,.btn-success:active.focus,.btn-success:active:focus,.btn-success:active:hover,.open>.dropdown-toggle.btn-success.focus,.open>.dropdown-toggle.btn-success:focus,.open>.dropdown-toggle.btn-success:hover{color:#fff;background-color:#398439;border-color:#255625}.btn-success.disabled.focus,.btn-success.disabled:focus,.btn-success.disabled:hover,.btn-success[disabled].focus,.btn-success[disabled]:focus,.btn-success[disabled]:hover,fieldset[disabled] .btn-success.focus,fieldset[disabled] .btn-success:focus,fieldset[disabled] .btn-success:hover{background-color:#5cb85c;border-color:#4cae4c}.btn-success .badge{color:#5cb85c;background-color:#fff}
      </style>
   </head>
   <body onload="yes()">
      <h3 style="position:fixed;bottom:1%;right:1%;z-index:1030;background-color:red;">Score/Petition: <span id='seconds-counter'></span></h3>
      <script>
         var seconds = 0;
         var el = document.getElementById('seconds-counter');
         function incrementSeconds() {
             seconds += 1;
             el.innerText = seconds;
         }
         var cancel;
         function yes(){
         const swalWithBootstrapButtons = Swal.mixin({
           customClass: {
             confirmButton: 'btn btn-success',
             cancelButton: 'btn btn-danger'
           },
           buttonsStyling: true
         })
         swalWithBootstrapButtons.fire({
           title: 'Start LGBTQ+ Game',
           text: "To play use the Arrow keys to move around the guy. Dodge the government people, and survive long enough to get people following your petition!",
           icon: 'info',
           showCancelButton: false,
           confirmButtonText: 'Ok, I want to change laws!',
           reverseButtons: true
         }).then((result) => {
           if (result.isConfirmed) {
             swalWithBootstrapButtons.fire(
               'Starting...',
               'The game is starting...',
               'success'
             )
             startGame();
           } else if (
             result.dismiss === Swal.DismissReason.cancel
           ) {
             swalWithBootstrapButtons.fire(
               'Cancelled',
               'Bro, why not play? Reload if you change your mind. :(',
               'error'
             )
           }
         })}
         var myGamePiece;
         var myBackground;
         var myObstacles = [];
         var height = window.innerHeight;
         var width = window.innerWidth + 1500;
         var playerstart = window.innerHeight - 100;
         function startGame() {
             myGamePiece = new component(40, 40, "http://3.bp.blogspot.com/-NDZNvT9hMDY/VOzLdxPr-NI/AAAAAAAAjB0/_xhJn9h6448/s1600/0505.png", 100, playerstart, "image");
             myBackground = new component(width, height, "https://res.cloudinary.com/dpoer5oaq/image/upload/v1619384438/Screen_Shot_2021-04-25_at_4.59.37_PM_omkwlg.png", 0, 0, "background");
             myGameArea.start();
         }
         var myGameArea = {
             canvas : document.createElement("canvas"),
             start : function() {
                 this.canvas.width = window.innerWidth;
                 this.canvas.height = window.innerHeight;
                 this.context = this.canvas.getContext("2d");
                 document.body.insertBefore(this.canvas, document.body.childNodes[0]);
                 this.frameNo = 0;
                 this.interval = setInterval(updateGameArea, 15);
                 this.cancel = setInterval(incrementSeconds, 2500);
                 window.addEventListener('keydown', function (e) {
                   myGameArea.keys = (myGameArea.keys || []);
                   myGameArea.keys[e.keyCode] = true;
                 })
                 window.addEventListener('keyup', function (e) {
                   myGameArea.keys[e.keyCode] = false;
                 })
                 },
             clear : function() {
                 this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
             },
             stop : function() {
                 clearInterval(this.interval);
                 value = document.getElementById("seconds-counter").innerHTML;
                  Swal.fire({
                    title: 'You got ' + value + ' people to sign your petition!',
                    icon: 'info',
                    html:
                      'You are one step closer to getting all LGBTQ+ people to not get discriminated based on their sexual orientation! If you have not checked out this presentation about LGBTQ+ Discrimination, you should check it out! Check it out ' +
                      '<a href="https://lgbtq-discrimination.netlify.app/main/index.html">here.</a> ',
                    showCloseButton: false,
                    showCancelButton: false,
                    focusConfirm: false,
                    confirmButtonText:
                      'Great!',
                    confirmButtonAriaLabel: 'Great!',
                  })
                 clearInterval(this.cancel);
             }
         }
         function everyinterval(n) {
          if ((myGameArea.frameNo / n) % 1 == 0) {return true;}
          return false;
         }
         function component(width, height, color, x, y, type) {
             this.type = type;
             if (type == "image" || type == "background" || type == "obstacle") {
                 this.image = new Image();
                 this.image.src = color;
             }
             this.width = width;
             this.height = height;
             this.speedX = 0;
             this.speedY = 0;
             this.x = x;
             this.y = y;
             this.update = function() {
                 ctx = myGameArea.context;
                 if (type == "image" || type == "background" || type == "obstacle") {
                     ctx.drawImage(this.image,
                         this.x,
                         this.y,
                         this.width, this.height);
                 if (type == "background") {
                     ctx.drawImage(this.image,
                         this.x + this.width,
                         this.y,
                         this.width, this.height);
                 }
                 } else {
                     ctx.fillStyle = color;
                     ctx.fillRect(this.x, this.y, this.width, this.height);
                 }
             }
             this.newPos = function() {
                 this.x += this.speedX;
                 this.y += this.speedY;
                 if (this.type == "background") {
                     if (this.x == -(this.width)) {
                         this.x = 0;
                     }
                 }
             }
             this.crashWith = function(otherobj) {
                var myleft = this.x;
                var myright = this.x + (this.width);
                var mytop = this.y;
                var mybottom = this.y + (this.height);
                var otherleft = otherobj.x;
                var otherright = otherobj.x + (otherobj.width);
                var othertop = otherobj.y;
                var otherbottom = otherobj.y + (otherobj.height);
                var crash = true;
                if ((mybottom < othertop) ||
                (mytop > otherbottom) ||
                (myright < otherleft) ||
                (myleft > otherright)) {
                  crash = false;
                }
                return crash;
              }
         }
         function updateGameArea() {
         var x, y;
          for (i = 0; i < myObstacles.length; i += 1) {
            if (myGamePiece.crashWith(myObstacles[i])) {
              myGameArea.stop();
              return;
            } else {
            myGameArea.clear();
           myGamePiece.speedX = 0;
           myGamePiece.speedY = 0;
           myGamePiece.image.src = "http://3.bp.blogspot.com/-NDZNvT9hMDY/VOzLdxPr-NI/AAAAAAAAjB0/_xhJn9h6448/s1600/0505.png";
           if (myGameArea.keys && myGameArea.keys[37]) {
             myGamePiece.speedX = -1;
             myGamePiece.image.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR5l3Vx0jusBoFvqywVR64-Z7oxz6_oX1CwDw&usqp=CAU";
           }
           if (myGameArea.keys && myGameArea.keys[39]) {
             myGamePiece.speedX = 1;
             myGamePiece.image.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR5l3Vx0jusBoFvqywVR64-Z7oxz6_oX1CwDw&usqp=CAU";
           }
           if (myGameArea.keys && myGameArea.keys[38]) {
             myGamePiece.speedY = -1;
             myGamePiece.image.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR5l3Vx0jusBoFvqywVR64-Z7oxz6_oX1CwDw&usqp=CAU";
           }
           if (myGameArea.keys && myGameArea.keys[40]) {
             myGamePiece.speedY = 1;
             myGamePiece.image.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR5l3Vx0jusBoFvqywVR64-Z7oxz6_oX1CwDw&usqp=CAU";
           }
           myBackground.speedX = -1;
           myBackground.newPos();
           myBackground.update();
            }
          }
          myGameArea.frameNo += 0.5;
          if (myGameArea.frameNo == 0.5 || everyinterval(200)) {
            x = myGameArea.canvas.width;
            minHeight = 20;
            maxHeight = 500;
            height = Math.floor(Math.random()*(maxHeight-minHeight+1)+minHeight);
            minGap = 200;
            maxGap = 500;
            gap = Math.floor(Math.random()*(maxGap-minGap+1)+minGap);
            myObstacles.push(new component(100, height, "https://cdn1.vectorstock.com/i/1000x1000/51/75/senior-politician-cartoon-people-character-vector-21375175.jpg", x, 0, 'obstacle'));
            myObstacles.push(new component(100, x - height - gap, "https://cdn1.vectorstock.com/i/1000x1000/51/75/senior-politician-cartoon-people-character-vector-21375175.jpg", x, height + gap, 'obstacle'));
          }
          for (i = 0; i < myObstacles.length; i += 1) {
            myObstacles[i].x += -1;
            myObstacles[i].update();
          }
           myGamePiece.newPos();
           myGamePiece.update();
         }
      </script>
   </body>
</html>
